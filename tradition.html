<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BertNet</title>
    <style>
         #relations {
             display: flex;
             flex-wrap: wrap;
         }

         .rel-container {
             width: fit-content;
             margin: 0 20px;
         }

         #title {
             text-transform: capitalize;
         }

         .rel-item, .scores {
             display: flex;
             justify-content: space-between;
         }

         .rel-item a {
             margin-right: 15px;
         }

         .scores span {
             width: 50px;
             text-align: center;
         }

         .caption {
             font-weight: bold;
         }

         .caption .scores {
             cursor: pointer;
         }
    </style>
</head>
<body>
<h1 id="title">tradition</h1>
<div id="relations"></div>
</body>
<script>
    let name = "tradition"
    let relations = [{'fro': 'queen', 'to': 'tradition', 'type': 'HasA', 'score': 0.008264551870524883, 'wm_score': 0.37377805, 'final': 0.11791860130936743}, {'fro': 'vatican', 'to': 'tradition', 'type': 'HasA', 'score': 0.008075937628746033, 'wm_score': 0.351962, 'final': 0.11124175634012225}, {'fro': 'city', 'to': 'tradition', 'type': 'HasA', 'score': 0.0063805487006902695, 'wm_score': 0.3680515, 'final': 0.1148818340904832}, {'fro': 'bible', 'to': 'tradition', 'type': 'HasA', 'score': 0.006341494154185057, 'wm_score': 0.5770725, 'final': 0.17756079590792956}, {'fro': 'game', 'to': 'tradition', 'type': 'HasA', 'score': 0.004947578068822622, 'wm_score': 0.36334848, 'final': 0.11246784864817584}, {'fro': 'church', 'to': 'tradition', 'type': 'HasA', 'score': 0.004847420379519463, 'wm_score': 0.5854178, 'final': 0.17901853426566364}, {'fro': 'monarchy', 'to': 'tradition', 'type': 'HasA', 'score': 0.004753377288579941, 'wm_score': 0.42821014, 'final': 0.13179040610200599}, {'fro': 'pope', 'to': 'tradition', 'type': 'HasA', 'score': 0.004119544755667448, 'wm_score': 0.36265734, 'final': 0.11168088332896722}, {'fro': 'club', 'to': 'tradition', 'type': 'HasA', 'score': 0.003753219498321414, 'wm_score': 0.3408995, 'final': 0.10489710364882501}, {'fro': 'museum', 'to': 'tradition', 'type': 'HasA', 'score': 0.003488916205242276, 'wm_score': 0.4362009, 'final': 0.13330251134366963}, {'fro': 'sport', 'to': 'tradition', 'type': 'HasA', 'score': 0.003316964954137802, 'wm_score': 0.40773162, 'final': 0.12464136146789648}, {'fro': 'ballet', 'to': 'tradition', 'type': 'HasA', 'score': 0.003159111365675926, 'wm_score': 0.38407058, 'final': 0.11743255195597316}, {'fro': 'rock', 'to': 'tradition', 'type': 'HasA', 'score': 0.003103942610323429, 'wm_score': 0.4099524, 'final': 0.12515847982722642}, {'fro': 'village', 'to': 'tradition', 'type': 'HasA', 'score': 0.002851310884580016, 'wm_score': 0.35525578, 'final': 0.10857265161920603}, {'fro': 'academy', 'to': 'tradition', 'type': 'HasA', 'score': 0.002836184808984399, 'wm_score': 0.4093001, 'final': 0.1247753593662891}, {'fro': 'tradition', 'to': 'twist', 'type': 'HasA', 'score': 0.2635073661804199, 'wm_score': 0.34409982, 'final': 0.28768510232629396}, {'fro': 'tradition', 'to': 'history', 'type': 'HasA', 'score': 0.056846823543310165, 'wm_score': 0.7059438, 'final': 0.25157591648031713}, {'fro': 'tradition', 'to': 'precedent', 'type': 'HasA', 'score': 0.024210896342992783, 'wm_score': 0.39111477, 'final': 0.13428205844009497}, {'fro': 'tradition', 'to': 'legacy', 'type': 'HasA', 'score': 0.017910657450556755, 'wm_score': 0.5295882, 'final': 0.17141392021538973}, {'fro': 'tradition', 'to': 'charm', 'type': 'HasA', 'score': 0.017001254484057426, 'wm_score': 0.3307818, 'final': 0.11113541813884022}, {'fro': 'tradition', 'to': 'future', 'type': 'HasA', 'score': 0.012427297420799732, 'wm_score': 0.4057576, 'final': 0.13042638819455984}, {'fro': 'tradition', 'to': 'meaning', 'type': 'HasA', 'score': 0.012349287047982216, 'wm_score': 0.5474946, 'final': 0.17289288093358757}, {'fro': 'tradition', 'to': 'revival', 'type': 'HasA', 'score': 0.012031735852360725, 'wm_score': 0.533765, 'final': 0.16855171509665254}, {'fro': 'tradition', 'to': 'purpose', 'type': 'HasA', 'score': 0.01196235604584217, 'wm_score': 0.46186852, 'final': 0.14693420523208955}, {'fro': 'tradition', 'to': 'pedigree', 'type': 'HasA', 'score': 0.011678608134388924, 'wm_score': 0.40546203, 'final': 0.12981363469407226}, {'fro': 'tradition', 'to': 'place', 'type': 'HasA', 'score': 0.010239744558930397, 'wm_score': 0.44162926, 'final': 0.1396565991912513}, {'fro': 'tradition', 'to': 'past', 'type': 'HasA', 'score': 0.006338954903185368, 'wm_score': 0.44468153, 'final': 0.13784172743222978}, {'fro': 'tradition', 'to': 'lineage', 'type': 'HasA', 'score': 0.0058798035606741905, 'wm_score': 0.5092714, 'final': 0.15689728249247195}, {'fro': 'tradition', 'to': 'significance', 'type': 'HasA', 'score': 0.005527295172214508, 'wm_score': 0.5038743, 'final': 0.15503139662055018}, {'fro': 'tradition', 'to': 'message', 'type': 'HasA', 'score': 0.005489634349942207, 'wm_score': 0.35373846, 'final': 0.10996428204495956}, {'fro': 'tradition', 'to': 'value', 'type': 'HasA', 'score': 0.0052862875163555145, 'wm_score': 0.34384185, 'final': 0.10685295626144888}, {'fro': 'tradition', 'to': 'name', 'type': 'HasA', 'score': 0.005017994437366724, 'wm_score': 0.5217473, 'final': 0.16003678610615674}, {'fro': 'tradition', 'to': 'reputation', 'type': 'HasA', 'score': 0.004873519763350487, 'wm_score': 0.4832552, 'final': 0.14838802383434538}, {'fro': 'tradition', 'to': 'legend', 'type': 'HasA', 'score': 0.004307442344725132, 'wm_score': 0.577119, 'final': 0.1761509096413076}, {'fro': 'tradition', 'to': 'curse', 'type': 'HasA', 'score': 0.004079569596797228, 'wm_score': 0.39841923, 'final': 0.12238146771775808}, {'fro': 'tradition', 'to': 'return', 'type': 'HasA', 'score': 0.003736992133781314, 'wm_score': 0.33754027, 'final': 0.10387797549364693}, {'fro': 'tradition', 'to': 'role', 'type': 'HasA', 'score': 0.0033501216676086187, 'wm_score': 0.39869273, 'final': 0.12195290416732606}, {'fro': 'tradition', 'to': 'foundation', 'type': 'HasA', 'score': 0.0031679952517151833, 'wm_score': 0.3950068, 'final': 0.12071963667620064}, {'fro': 'prayer', 'to': 'tradition', 'type': 'AtLocation', 'score': 0.00682002492249012, 'wm_score': 0.5022259, 'final': 0.1554417874457431}, {'fro': 'horse', 'to': 'tradition', 'type': 'AtLocation', 'score': 0.006179447285830975, 'wm_score': 0.35425422, 'final': 0.11060187910008171}, {'fro': 'miracle', 'to': 'tradition', 'type': 'AtLocation', 'score': 0.005570146720856428, 'wm_score': 0.33365512, 'final': 0.10399563870459953}, {'fro': 'blessing', 'to': 'tradition', 'type': 'AtLocation', 'score': 0.005070883315056562, 'wm_score': 0.48584238, 'final': 0.14930233232053963}, {'fro': 'revival', 'to': 'tradition', 'type': 'AtLocation', 'score': 0.00459911348298192, 'wm_score': 0.533765, 'final': 0.16334887943808737}, {'fro': 'wedding', 'to': 'tradition', 'type': 'AtLocation', 'score': 0.004368584603071213, 'wm_score': 0.39962554, 'final': 0.12294567122214987}, {'fro': 'poem', 'to': 'tradition', 'type': 'AtLocation', 'score': 0.004368212074041367, 'wm_score': 0.46591115, 'final': 0.14283109345182898}, {'fro': 'feast', 'to': 'tradition', 'type': 'AtLocation', 'score': 0.004280445631593466, 'wm_score': 0.476704, 'final': 0.14600751194211545}, {'fro': 'sacrifice', 'to': 'tradition', 'type': 'AtLocation', 'score': 0.0042607784271240234, 'wm_score': 0.4159509, 'final': 0.12776781489898684}, {'fro': 'sword', 'to': 'tradition', 'type': 'AtLocation', 'score': 0.004078283905982971, 'wm_score': 0.35862637, 'final': 0.1104427097341881}, {'fro': 'celebration', 'to': 'tradition', 'type': 'AtLocation', 'score': 0.0037338449619710445, 'wm_score': 0.572252, 'final': 0.17428929147337974}, {'fro': 'tree', 'to': 'tradition', 'type': 'AtLocation', 'score': 0.003628556616604328, 'wm_score': 0.33571744, 'final': 0.10325522163162303}, {'fro': 'statue', 'to': 'tradition', 'type': 'AtLocation', 'score': 0.0029390035197138786, 'wm_score': 0.3746015, 'final': 0.11443775246379972}, {'fro': 'gift', 'to': 'tradition', 'type': 'AtLocation', 'score': 0.0028426283970475197, 'wm_score': 0.4382832, 'final': 0.1334747998779333}, {'fro': 'tradition', 'to': 'making', 'type': 'AtLocation', 'score': 0.12237783521413803, 'wm_score': 0.43810833, 'final': 0.21709698364989663}, {'fro': 'tradition', 'to': 'works', 'type': 'AtLocation', 'score': 0.0628080889582634, 'wm_score': 0.5115236, 'final': 0.1974227422707844}, {'fro': 'tradition', 'to': 'books', 'type': 'AtLocation', 'score': 0.018436580896377563, 'wm_score': 0.43671528, 'final': 0.1439201906274643}, {'fro': 'tradition', 'to': 'future', 'type': 'AtLocation', 'score': 0.015554738231003284, 'wm_score': 0.4057576, 'final': 0.13261559676170231}, {'fro': 'tradition', 'to': 'way', 'type': 'AtLocation', 'score': 0.01243249699473381, 'wm_score': 0.48679966, 'final': 0.1547426458963137}, {'fro': 'tradition', 'to': 'past', 'type': 'AtLocation', 'score': 0.011907207779586315, 'wm_score': 0.44468153, 'final': 0.14173950444571046}, {'fro': 'tradition', 'to': 'family', 'type': 'AtLocation', 'score': 0.009779461659491062, 'wm_score': 0.4994104, 'final': 0.15666874316164375}, {'fro': 'tradition', 'to': 'background', 'type': 'AtLocation', 'score': 0.00763212563470006, 'wm_score': 0.45654142, 'final': 0.14230491394429007}, {'fro': 'tradition', 'to': 'garden', 'type': 'AtLocation', 'score': 0.006100886967033148, 'wm_score': 0.4099431, 'final': 0.12725355087692322}, {'fro': 'tradition', 'to': 'bible', 'type': 'AtLocation', 'score': 0.005330593325197697, 'wm_score': 0.5770725, 'final': 0.1768531653276384}, {'fro': 'tradition', 'to': 'book', 'type': 'AtLocation', 'score': 0.004835376050323248, 'wm_score': 0.50280833, 'final': 0.1542272622352263}, {'fro': 'tradition', 'to': 'balance', 'type': 'AtLocation', 'score': 0.004315170459449291, 'wm_score': 0.35388547, 'final': 0.1091862603216145}, {'fro': 'tradition', 'to': 'name', 'type': 'AtLocation', 'score': 0.00431032944470644, 'wm_score': 0.5217473, 'final': 0.15954142061129453}, {'fro': 'tradition', 'to': 'present', 'type': 'AtLocation', 'score': 0.0042642708867788315, 'wm_score': 0.45135856, 'final': 0.1383925576207452}, {'fro': 'tradition', 'to': 'middle', 'type': 'AtLocation', 'score': 0.004209476988762617, 'wm_score': 0.44329417, 'final': 0.13593488489213387}, {'fro': 'tradition', 'to': 'village', 'type': 'AtLocation', 'score': 0.004173425957560539, 'wm_score': 0.35525578, 'final': 0.1094981321702924}, {'fro': 'tradition', 'to': 'spirit', 'type': 'AtLocation', 'score': 0.0041559780947864056, 'wm_score': 0.62879765, 'final': 0.1915484796663505}, {'fro': 'tradition', 'to': 'library', 'type': 'AtLocation', 'score': 0.0033605843782424927, 'wm_score': 0.34807053, 'final': 0.10677356806476976}, {'fro': 'celebration', 'to': 'tradition', 'type': 'HasA', 'score': 0.003404452931135893, 'wm_score': 0.572252, 'final': 0.17405871705179513}, {'fro': 'occasion', 'to': 'tradition', 'type': 'HasA', 'score': 0.003966928459703922, 'wm_score': 0.45041013, 'final': 0.13789988892179278}, {'fro': 'dance', 'to': 'tradition', 'type': 'HasA', 'score': 0.003103718627244234, 'wm_score': 0.5108713, 'final': 0.155433993039071}];
    let relation_types = [{'label': 'RelatedTo', 'info': 'The most general relation. There is some positive relationship between A and B, but ConceptNet cant determine what that relationship is based on the data. This was called ConceptuallyRelatedTo in ConceptNet 2 through 4. Symmetric.', 'mask': ''}, {'label': 'FormOf', 'info': 'A is an inflected form of B; B is the root word of A.', 'mask': ''}, {'label': 'IsA', 'info': 'A is a subtype or a specific instance of B; every A is a B. This can include specific instances; the distinction between subtypes and instances is often blurry in language. This is the hyponym relation in WordNet.', 'mask': ''}, {'label': 'PartOf', 'info': 'A is a part of B. This is the part meronym relation in WordNet.', 'mask': ''}, {'label': 'HasA', 'info': 'B belongs to A, either as an inherent part or due to a social construct of possession. HasA is often the reverse of PartOf.', 'mask': 'The OBJECT1 has a OBJECT2'}, {'label': 'UsedFor', 'info': 'A is used for B; the purpose of A is B.', 'mask': ''}, {'label': 'CapableOf', 'info': 'Something that A can typically do is B.', 'mask': ''}, {'label': 'AtLocation', 'info': 'A is a typical location for B, or A is the inherent location of B. Some instances of this would be considered meronyms in WordNet.', 'mask': 'A OBJECT1 is in the OBJECT2'}, {'label': 'Causes', 'info': 'A and B are events, and it is typical for A to cause B.', 'mask': ''}, {'label': 'HasSubevent', 'info': 'A and B are events, and B happens as a subevent of A.', 'mask': ''}, {'label': 'HasFirstSubevent', 'info': 'A is an event that begins with subevent B.', 'mask': ''}, {'label': 'HasLastSubevent', 'info': 'A is an event that concludes with subevent B.', 'mask': ''}, {'label': 'HasPrerequisite', 'info': 'In order for A to happen, B needs to happen; B is a dependency of A.', 'mask': ''}, {'label': 'HasProperty', 'info': 'A has B as a property; A can be described as B.', 'mask': ''}, {'label': 'MotivatedByGoal', 'info': 'Someone does A because they want result B; A is a step toward accomplishing the goal B.', 'mask': ''}, {'label': 'ObstructedBy', 'info': 'A is a goal that can be prevented by B; B is an obstacle in the way of A.', 'mask': ''}, {'label': 'Desires', 'info': 'A is a conscious entity that typically wants B. Many assertions of this type use the appropriate languages word for person as A.', 'mask': ''}, {'label': 'CreatedBy', 'info': 'B is a process or agent that creates A.', 'mask': ''}, {'label': 'Synonym', 'info': 'A and B have very similar meanings. They may be translations of each other in different languages. This is the synonym relation in WordNet as well. Symmetric.', 'mask': ''}, {'label': 'Antonym', 'info': 'A and B are opposites in some relevant way, such as being opposite ends of a scale, or fundamentally similar things with a key difference between them. Counterintuitively, two concepts must be quite similar before people consider them antonyms. This is the antonym relation in WordNet as well. Symmetric.', 'mask': ''}, {'label': 'DistinctFrom', 'info': 'A and B are distinct member of a set; something that is A is not B. Symmetric.', 'mask': ''}, {'label': 'DerivedFrom', 'info': 'A is a word or phrase that appears within B and contributes to Bs meaning.', 'mask': ''}, {'label': 'SymbolOf', 'info': 'A symbolically represents B.', 'mask': ''}, {'label': 'DefinedAs', 'info': 'A and B overlap considerably in meaning, and B is a more explanatory version of A.', 'mask': ''}, {'label': 'MannerOf', 'info': 'A is a specific way to do B. Similar to IsA, but for verbs.', 'mask': ''}, {'label': 'LocatedNear', 'info': 'A and B are typically found near each other. Symmetric.', 'mask': ''}, {'label': 'HasContext', 'info': 'A is a word used in the context of B, which could be a topic area, technical field, or regional dialect.', 'mask': ''}, {'label': 'SimilarTo', 'info': 'A is similar to B. Symmetric.', 'mask': ''}, {'label': 'EtymologicallyRelatedTo', 'info': 'A and B have a common origin. Symmetric.', 'mask': ''}, {'label': 'EtymologicallyDerivedFrom', 'info': 'A is derived from B.', 'mask': ''}, {'label': 'CausesDesire', 'info': 'A makes someone want B.', 'mask': ''}, {'label': 'MadeOf', 'info': 'A is made of B.', 'mask': ''}, {'label': 'ReceivesAction', 'info': 'B can be done to A.', 'mask': ''}];

        function fillHTML(sortBy) {
        document.getElementById("relations").innerHTML = "";

        relation_types.forEach(r => {
            let frels_from = relations.filter(rel => rel.type === r.label && rel.fro === name);
            let title_from = r.mask.replace("OBJECT1", name).replace("OBJECT2", "...");
            generateList(r, sortBy, frels_from.map(frel => {
                return {label: frel.to, ...frel}
            }), title_from);
            let frels_to = relations.filter(rel => rel.type === r.label && rel.to === name);
            let title_to = r.mask.replace("OBJECT1", "...").replace("OBJECT2", name);
            generateList(r, sortBy, frels_to.map(frel => {
                return {label: frel.fro, ...frel}
            }), title_to);

        })
    }

    function generateList(r, sortBy, frels, title) {
        if (frels.length > 0) {
            frels = frels.sort(sortBy);
            let str = `<div class="rel-container"><h2>${title}</h2>`
            str += `<div class="rel-item caption"><a>Name</a>
                            <div class="scores">
                            <span  onclick="fillHTML(sortByBERT)">BERT</span>
                            <span onclick="fillHTML(sortByW2V)">W2V</span>
                            <span  onclick="fillHTML(sortByFinal)">Score</span></div></div>`
            str += "<div>" + frels.map(frel => {
                let score = parseFloat(frel.score).toFixed(3);
                let wm_score = parseFloat(frel.wm_score).toFixed(3);
                let interpolated_score = frel.final.toFixed(3);
                return `<div class="rel-item"><a href="${frel.label}.html">${frel.label}</a>
                            <div class="scores"><span>${score}</span>
                            <span>${wm_score}</span>
                            <span>${interpolated_score}</span></div></div>`
            }).join("\n") + " </div></div>"
            document.getElementById("relations").insertAdjacentHTML("beforeend", str)
        }
    }

    function sortByFinal(fr1, fr2) {
        return fr2.final - fr1.final;
    }

    function sortByBERT(fr1, fr2) {
        return fr2.score - fr1.score;
    }

    function sortByW2V(fr1, fr2) {
        return fr2.wm_score - fr1.wm_score;
    }

    fillHTML(sortByFinal)
</script>
</html>

